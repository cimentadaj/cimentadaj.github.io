blogdown::serve_site()
blogdown::serve_site()
servr::daemon_stop("4328007184")
blogdown::serve_site()
servr::daemon_stop("4323397328")
blogdown::serve_site()
5 + 5
getwd()
blogdown::build_site()
blogdown::serve_site()
servr::daemon_stop("4553209984")
blogdown::build_site()
blogdown::serve_site()
getwd()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
getwd()
blogdown::serve_site()
servr::daemon_stop("4324709536")
cimentadaj::my_new_post("How long should I wait for my bike?")
blogdown::find_tags()
tags <- blogdown::find_tags()
tags
?blogdown::find_tags()
?blogdown::find_tags
count_yaml(sort_by_count = FALSE)
blogdown::count_yaml(sort_by_count = FALSE)
blogdown::serve_site()
cimentadaj::my_new_post("Breve análisis del cambio de voto en Cataluña")
?ggridges::Catalan_elections
library(ggridges)
blogdown::serve_site()
blogdown::serve_site()
servr::daemon_stop("4648689728")
cimentadaj::my_new_post("Brief Analysis of Independent/Unionist Vote in Catalonia")
blogdown::serve_site()
# Change abbreviated Indy and Unionist to long names
Catalan_elections$Option <- with(Catalan_elections, ifelse(Option == "Indy", "Independent", "Unionist"))
# Load my libraries
library(scales)
library(tidyverse)
# Create
avg_pl <-
Catalan_elections %>%
group_by(Municipality, Option) %>%
summarize(first_year = first(Percent, Year),
last_year = last(Percent, Year)) %>%
group_by(Option) %>%
summarize(first_year = median(first_year, na.rm = TRUE),
last_year = median(last_year, na.rm = TRUE)) %>%
mutate(id = 1:nrow(.)) %>%
gather(year, value, -id, -Option)
avg_pl
Catalan_elections %>%
group_by(Municipality, Option) %>%
summarize(first_year = first(Percent, Year),
last_year = last(Percent, Year)) %>%
group_by(Option)
Catalan_elections %>%
group_by(Municipality, Option) %>%
summarize(first_year = first(Percent, Year),
last_year = last(Percent, Year)) %>%
group_by(Option)
# Summarize the indy/unionist vote for
# the first/last year for Barcelona
bcn_pl <-
Catalan_elections %>%
filter(Municipality == "Barcelona") %>%
group_by(Municipality, Option) %>%
summarize(first_year = first(Percent, Year),
last_year = last(Percent, Year)) %>%
mutate(id = 1:nrow(.)) %>%
gather(year, value, ends_with("year"))
bcn_pl
base_plot <-
Catalan_elections %>%
group_by(Municipality, Option) %>%
summarize(first_year = first(Percent, Year),
last_year = last(Percent, Year)) %>%
mutate(id = paste0(Municipality, "_", Option)) %>%
gather(year, value, ends_with("year")) %>%
ggplot(aes(year, value)) +
geom_point(alpha = 0.1, size = 2) +
geom_line(aes(group = id), alpha = 0.1)
base_plot
# Add the median summary line for both indy/unionist
median_plot <-
base_plot +
geom_point(data = avg_pl, aes(year, value),
colour = "red", alpha = 0.5, size = 2) +
geom_line(data = avg_pl, aes(year, value, group = id),
colour = "red", alpha = 0.5, size = 2)
median_plot
# Add the change of Barcelona for both indy/unionist vote
bcn_plot <-
median_plot +
geom_point(data = bcn_pl, aes(year, value),
colour = "blue", alpha = 0.5, size = 2) +
geom_line(data = bcn_pl, aes(year, value, group = id),
colour = "blue", alpha = 0.5, size = 2)
bcn_plot
# Separate the plot for indy/unionist in different
# panels and add pretty options
pretty_plot <-
bcn_plot +
scale_x_discrete(name = NULL,
labels = c("1980",
"2015")) +
scale_y_continuous(name = "% de votos a favor de:",
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
facet_wrap(~ Option, strip.position = "bottom") +
labs(
title = "Aumento de voto independentista/unionista en tres decadas",
subtitle = "Linea roja es la mediana de todos los municipios - Linea azul es Barcelona",
caption = "Datos obtenidos por @marcbeldata - Gráfico y análisis por @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
pretty_plot
# Separate the plot for indy/unionist in different
# panels and add pretty options
pretty_plot <-
bcn_plot +
scale_x_discrete(name = NULL,
labels = c("1980",
"2015")) +
scale_y_continuous(name = "% de votos a favor de:",
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
facet_wrap(~ Option, strip.position = "bottom") +
labs(
title = "Independence/Unionist votes in Catalonia in three decades",
subtitle = "Red line is the median change for all municipalities - Blue line is Barcelona",
caption = "Data collected by @marcbeldata - Plot and analisis by @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
# Final plot
pretty_plot
pretty_plot
pretty_plot
# Separate the plot for indy/unionist in different
# panels and add pretty options
pretty_plot <-
bcn_plot +
scale_x_discrete(name = NULL,
labels = c("1980",
"2015")) +
scale_y_continuous(name = "% of votes in favour of:",
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
facet_wrap(~ Option, strip.position = "bottom") +
labs(
title = "Independence/Unionist vote in Catalonia in three decades",
subtitle = "Red line is the median change for all municipalities - Blue line is Barcelona",
caption = "Data collected by @marcbeldata - Plot and analisis by @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
pretty_plot
# Plot for indy/unionist vote over time only for Barcelona
Catalan_elections %>%
filter(Municipality == "Sabadell") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% de votos a favor de:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Aumento de voto independentista/unionista en Barcelona",
caption = "Datos obtenidos por @marcbeldata - Gráfico y análisis por @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
Catalan_elections %>%
filter(Municipality == "Sabadell") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% de votos a favor de:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Aumento de voto independentista/unionista en Barcelona",
caption = "Datos obtenidos por @marcbeldata - Gráfico y análisis por @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
# Plot for indy/unionist vote over time only for Barcelona
Catalan_elections %>%
filter(Municipality == "Lleid") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% de votos a favor de:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Aumento de voto independentista/unionista en Barcelona",
caption = "Datos obtenidos por @marcbeldata - Gráfico y análisis por @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
# Plot for indy/unionist vote over time only for Barcelona
Catalan_elections %>%
filter(Municipality == "Lleida") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% de votos a favor de:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Aumento de voto independentista/unionista en Barcelona",
caption = "Datos obtenidos por @marcbeldata - Gráfico y análisis por @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
Catalan_elections %>%
filter(Municipality == "Lleida") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% de votos a favor de:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Aumento de voto independentista/unionista en Barcelona",
caption = "Datos obtenidos por @marcbeldata - Gráfico y análisis por @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
Catalan_elections %>%
filter(Municipality == "Barcelona") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% of votes in favour of:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Overtime votes for independence/unionist in Barcelona",
caption = "Data collected by @marcbeldata - Plot and analisis by @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
sum(cranlogs::cran_downloads('ess', from = "2017-09-00", to = "2017-12-14")$count)
cranlogs::cran_downloads('ess', from = "2017-09-00", to = "2017-12-14")
cranlogs::cran_downloads('ess', from = "2017-09-01", to = "2017-12-14")
sum(cranlogs::cran_downloads('ess', from = "2017-09-01", to = "2017-12-14")$count)
Catalan_elections %>%
filter(Municipality == "Barcelona") %>%
ggplot(aes(Year, Percent, group = Option, colour = Option)) +
geom_line(alpha = 0.5, size = 2) +
scale_x_continuous(name = NULL) +
scale_colour_discrete(name = NULL) +
scale_y_continuous(name = "% of votes in favour of:",
lim = c(0, 100),
breaks = seq(0, 100, 20),
labels = percent(seq(0, 1, 0.2))) +
labs(
title = "Overtime votes for independence/unionist in Barcelona",
caption = "Data collected by @marcbeldata - Plot and analisis by @cimentadaj"
) +
theme_minimal() +
theme(
plot.title = element_text(size = 18, family = "Arial-BoldMT"),
plot.subtitle = element_text(size = 16, color = "#666666"),
plot.caption = element_text(size = 12, color = "#666666"),
legend.position = "top",
legend.text = element_text(size = 14),
strip.text.x = element_text(size = 14),
axis.title.y = element_text(size = 16),
axis.text.y = element_text(size = 12),
axis.text.x = element_text(size = 14)
)
blogdown::build_site()
