---
title: Brief Analysis of Independent/Unionist Vote in Catalonia
author: Jorge Cimentada
date: '2017-12-14'
slug: brief-analysis-of-independent-unionist-vote-in-catalonia
categories: []
tags: ['R', 'EDA']
---



<div id="catalan-elections" class="section level2">
<h2>Catalan elections</h2>
<p>On a train from Barcelona-Madrid I started working with an <code>R</code> package called <code>ggrides</code>. To my surprise, the package contains one dataset that documents the change in independent/unionist vote for all Catalan municipalities from 1980 to 2015. This is very cool! Needless to say, I left what I was doing and started to dive into the dataset.</p>
<p>The data looks like this:</p>
<pre class="r"><code>library(ggridges)
Catalan_elections</code></pre>
<pre><code>## # A tibble: 20,764 x 4
##          Municipality  Year Option Percent
##                 &lt;chr&gt; &lt;int&gt;  &lt;chr&gt;   &lt;dbl&gt;
##  1 Abella de la Conca  1980   Indy   68.42
##  2 Abella de la Conca  1984   Indy   95.71
##  3 Abella de la Conca  1988   Indy   89.36
##  4 Abella de la Conca  1992   Indy   81.67
##  5 Abella de la Conca  1995   Indy   80.00
##  6 Abella de la Conca  1999   Indy   74.70
##  7 Abella de la Conca  2003   Indy   84.42
##  8 Abella de la Conca  2006   Indy   73.24
##  9 Abella de la Conca  2010   Indy   75.90
## 10 Abella de la Conca  2012   Indy   83.95
## # ... with 20,754 more rows</code></pre>
<p>Very straight forward. It’s the ‘Indy’ or Independent vote and the ‘Unionist’ vote from 1980 until 2015. The data is complete for nearly all Municipalities, meaning that the data is available for all years. Only a handful (~ 40) do not have data starting from 1980.</p>
<p>Basically, I wanted to answer one question: has the indepence vote grown over time? This question is of general interest considering that the topic is being hotly debated in the media and next week new Catalan elections will be held in a scenario never seen before; after independent parties proclaimed unilateral independece and the government seized control of Catalunya. The elections are predicted to be very contested with Independent parties losing some votes.</p>
<p>With that said, let’s dive into the data!</p>
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<pre class="r"><code># Load my libraries
library(scales)
library(tidyverse)

# Change abbreviated Indy and Unionist to long names
Catalan_elections$Option &lt;- with(Catalan_elections, ifelse(Option == &quot;Indy&quot;, &quot;Independent&quot;, &quot;Unionist&quot;))


# Summarize the median independence/unionist vote for
# all municipalities on the first/last year recorded
avg_pl &lt;-
  Catalan_elections %&gt;%
  group_by(Municipality, Option) %&gt;%
  summarize(first_year = first(Percent, Year),
            last_year = last(Percent, Year)) %&gt;%
  group_by(Option) %&gt;%
  summarize(first_year = median(first_year, na.rm = TRUE),
            last_year = median(last_year, na.rm = TRUE)) %&gt;%
  mutate(id = 1:nrow(.)) %&gt;%
  gather(year, value, -id, -Option)

# Summarize the indy/unionist vote for
# the first/last year for Barcelona
bcn_pl &lt;-
  Catalan_elections %&gt;%
  filter(Municipality == &quot;Barcelona&quot;) %&gt;%
  group_by(Municipality, Option) %&gt;%
  summarize(first_year = first(Percent, Year),
            last_year = last(Percent, Year)) %&gt;%
  mutate(id = 1:nrow(.)) %&gt;%
  gather(year, value, ends_with(&quot;year&quot;))

# Create a base parallel plot with both
# unionist/independence votes pooled
base_plot &lt;-
  Catalan_elections %&gt;%
  group_by(Municipality, Option) %&gt;%
  summarize(first_year = first(Percent, Year),
            last_year = last(Percent, Year)) %&gt;%
  mutate(id = paste0(Municipality, &quot;_&quot;, Option)) %&gt;%
  gather(year, value, ends_with(&quot;year&quot;)) %&gt;%
  ggplot(aes(year, value)) +
  geom_point(alpha = 0.1, size = 2) +
  geom_line(aes(group = id), alpha = 0.1)

# Add the median summary line for both indy/unionist
median_plot &lt;-
  base_plot +
  geom_point(data = avg_pl, aes(year, value),
            colour = &quot;red&quot;, alpha = 0.5, size = 2) +
  geom_line(data = avg_pl, aes(year, value, group = id),
            colour = &quot;red&quot;, alpha = 0.5, size = 2)

# Add the change of Barcelona for both indy/unionist vote
bcn_plot &lt;-
  median_plot +
  geom_point(data = bcn_pl, aes(year, value),
             colour = &quot;blue&quot;, alpha = 0.5, size = 2) +
  geom_line(data = bcn_pl, aes(year, value, group = id),
            colour = &quot;blue&quot;, alpha = 0.5, size = 2)


# Separate the plot for indy/unionist in different
# panels and add pretty options
pretty_plot &lt;-
  bcn_plot +
  scale_x_discrete(name = NULL,
                   labels = c(&quot;1980&quot;,
                              &quot;2015&quot;)) +
  scale_y_continuous(name = &quot;% of votes in favour of:&quot;,
                     breaks = seq(0, 100, 20),
                     labels = percent(seq(0, 1, 0.2))) +
  facet_wrap(~ Option, strip.position = &quot;bottom&quot;) +
  labs(
    title = &quot;Independence/Unionist vote in Catalonia in three decades&quot;,
    subtitle = &quot;Red line is the median change for all municipalities - Blue line is Barcelona&quot;,
    caption = &quot;Data collected by @marcbeldata - Plot and analisis by @cimentadaj&quot;
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, family = &quot;Arial-BoldMT&quot;),
    plot.subtitle = element_text(size = 12, color = &quot;#666666&quot;),
    plot.caption = element_text(size = 12, color = &quot;#666666&quot;),
    strip.text.x = element_text(size = 14),
    axis.title.y = element_text(size = 16),
    axis.text.y = element_text(size = 12),
    axis.text.x = element_text(size = 14)
  )
# Final plot
pretty_plot</code></pre>
<p><img src="/blog/2017-12-14-brief-analysis-of-independentunionist-vote-in-catalonia/2017-12-14-brief-analysis-of-independent-unionist-vote-in-catalonia_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>I was very surprised with this plot. On the left panel we can see the increase of independence votes in the last 35 years. The red line is the median change for all municipalities. There is a huge average increase from around 49% to over 70%. In fact, it’s not just an artifact of mean/median with big variance. If we look at the bulk of the distribution on the right line and then the left line, we see an upwards shift in the whole distribution.</p>
<p>On the other hand, the unionist vote seems to have decreased! The left/right distributions seem to be very similar (but it looks like the distribution of the right line has some outliers shifting upwards). But remember something: these are all municipalities. Municipalities might have 1000 citizen or even less! Consider the lonely town in a mountain with 50 people voting for independent parties: that’s also a municipality.</p>
<p>It is for this reason that we need to pay attention to places like Barcelona, which have over 1 million residents and definately weigh in more in proportion. And that’s where the interesting thing about this plot arises: the Barcelona change is practically the same. Not only have the votes increased very very similarly for both sides, but they’re also at the same level of support. Both blue lines look pretty much identical.</p>
<p>Don’t forget: small differences <strong>can</strong> make a difference, specially in elections. Perhaps they <strong>are</strong> different but we need to take a closer look.</p>
<p>Let’s plot the independence/unionist evolution only for Barcelona.</p>
<pre class="r"><code># Plot for indy/unionist vote over time only for Barcelona
Catalan_elections %&gt;%
  filter(Municipality == &quot;Barcelona&quot;) %&gt;%
  ggplot(aes(Year, Percent, group = Option, colour = Option)) +
  geom_line(alpha = 0.5, size = 2) +
  scale_x_continuous(name = NULL) +
  scale_colour_discrete(name = NULL) +
  scale_y_continuous(name = &quot;% of votes in favour of:&quot;,
                     lim = c(0, 100),
                     breaks = seq(0, 100, 20),
                     labels = percent(seq(0, 1, 0.2))) +
  labs(
    title = &quot;Overtime votes for independence/unionist in Barcelona&quot;,
    caption = &quot;Data collected by @marcbeldata - Plot and analisis by @cimentadaj&quot;
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, family = &quot;Arial-BoldMT&quot;),
    plot.subtitle = element_text(size = 12, color = &quot;#666666&quot;),
    plot.caption = element_text(size = 12, color = &quot;#666666&quot;),
    legend.position = &quot;top&quot;,
    legend.text = element_text(size = 14),
    strip.text.x = element_text(size = 14),
    axis.title.y = element_text(size = 16),
    axis.text.y = element_text(size = 12),
    axis.text.x = element_text(size = 14)
  )</code></pre>
<p><img src="/blog/2017-12-14-brief-analysis-of-independentunionist-vote-in-catalonia/2017-12-14-brief-analysis-of-independent-unionist-vote-in-catalonia_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Despite most municipalities are for independence, Barcelona, by only a small margin, has a majority of people voting for unionist parties. Be aware that these votes are not ‘referendums’ carried out every year. These are votes towards independence/unionist parties, which is a different thing. Also note that these are not predictions/forecasts, so they don’t have uncertainty intervals or margins of errors. This is empirical data from voter turnout.</p>
<p>I also tried other big municipalities such as Sabadell and found that unionism trumps over independence much strongly. Yet in others like Lleida, Independence seems to be on top. For a look at specific municipalities, <a href="http://marcbeldata.github.io/ggjoy-Catalan-vote-2015/">check the post by Marc Belzunces</a></p>
</div>
<div id="a-note-on-next-weeks-elections" class="section level2">
<h2>A note on next week’s elections</h2>
<p>This data takes us as far as 2015. Catalonia has suffered dramatic changes since 2015 specially due to the independence movement. These data are most likely not a good representation of what’s gonna happen next week. Big municipalities have usually been majority unionists according to polls, but the differences are tiny and we’ve seen dramatic changes with independence parties proclaiming unilateral independence. There are good attempts at predicting catalan elections (<a href="https://politica.elpais.com/politica/2017/12/07/ratio/1512647178_322229.html">in Spanish</a>) so tune in next week to see what happens.</p>
</div>
